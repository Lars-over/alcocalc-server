# AlcoCalc-server

AlcoCalc-server is a storage service for AlcoCalc-applications.

## Installation

***TBC***


## Run the server

To start the server and initialize the database, navigate to the root directory and run:

```bash
npm start
```

&nbsp;


## API Reference

Alcocalc-Server is organized around REST. The server acccepts http-requests and returns JSON-encoded responses. It uses standardized response codes for the requests, such as 404 (not found), 200 (OK), 201 (OK Created Success), 202 (OK Deleted Success) and 500 (Internal Server Error).


## **Objects**

## Day

A Day is a container object that holds the date and a list of drinks associated with that day.


**Attributes:**
- id (String): Automatically generated by the Alcocalc-server
- date (String): A string that represents the current date on the format "YYYYMMDD"
- drinks: (array): An array of *Drink*-objects

```javascript
   {
    id: {type: String},
    date: {
        type: String,
        default:  "YYYYMMDD" //today
        required: true
    },
    drinks: [{
        id: {type: String}
        time: {type: String},
        beverage: {type: String},
        volume: {type: String},
        unit: {type: String},
        percentage: {type: String},
        color: {type: String},
        }]
   }
```
&nbsp;

### Create a Day-object

Creates a new Day-object.

***Parameters***
- id (optional)
- date (optional)
- drinks (optional)

```bash
POST http://localhost:3000/day/20220307

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day", 
                 {method: "POST",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"},
                  body: { 
                          "date" : "20221224",
                          "drinks": []
                          }
                  });

response = response.json()
```
**Response**

The Day object just created.
```javascript
{
 "id": "abcd123"
 "date": "20221224"
 "drinks": []
}
```
&nbsp;

### Retrieve all Days

Retrieves all Days existing on the server.

***Parameters***
- None

```bash
GET http://localhost:3000/day

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day", 
                 {method: "GET",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"}
                  });

response = response.json()
```
**Response**

An array of all Day-objects in JSON-format.
```javascript
[
 {
 "id": "abcd123"
 "date": "20221224"
 "drinks": []
 },
 {
 "id": "bdfg435"
 "date": "20221223"
 "drinks": []
 },
]
```
&nbsp;

### Retrieve a specific Day

Retrieves the Day with the date provided.

***Parameters***
- date (required)

```bash
GET http://localhost:3000/day/"20221224"

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day/20221224", 
                 {method: "GET",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"}
                  });

response = response.json()
```
**Response**

The specified Day-object in JSON-format.
```javascript

 {
 "id": "abcd123"
 "date": "20221224"
 "drinks": []
 }

```
&nbsp;

### Delete a Day

Deletes the Day with the date provided.

***Parameters***
- date (required)

```bash
DELETE http://localhost:3000/day/"20221224"

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day/20221224", 
                 {method: "DELETE",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"}
                  });

response = response.json()
```
**Response**

The deleted Day-object in JSON-format.
```javascript

 {
 "id": "abcd123"
 "date": "20221224"
 "drinks": []
 }

```
&nbsp;


## Drink

A Drink is an entity that represents the consumation of a type of beverage at a given time.


**Attributes:**
- id (String): Automatically generated by the Alcocalc-server
- time (String): The time of consumaiton
- beverage (String): Type of drink
- volume (String): Volume of the drink
- percentage (String): Alcoholic percentage of the drink
- color (String): Color assigned for the drink by the user

```javascript
{
  id: {type: String}
  time: {type: String},
  beverage: {type: String},
  volume: {type: String},
  unit: {type: String},
  percentage: {type: String},
  color: {type: String},
    }]
```


&nbsp;

### Add Drink

Adds a Drink-object to the Day-object that represents the gate given.

***Parameters***
- date (required)
- drink (required)

```bash
GET http://localhost:3000/day/"20221224"/add

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day/20221224/add", 
                 {method: "PATCH",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"},
                  body : {
                          "time": "18:00",
                          "beverage": "Beer",
                          "volume": "0.5",
                          "unit": "l",
                          "percentage": "4.5",
                          "color": "#000555"
                         }

                  });

response = response.json()
```
**Response**

The modified Day-object in JSON-format.
```javascript
[
 {
 "id": "abcd123"
 "date": "20221224"
 "drinks": [{
        "id": "xyz987"
        "time": "18:00",
        "beverage": "Beer",
        "volume": "0.5",
        "unit": "l",
        "percentage": "4.5",
        "color": "#000555"
        }]
```

&nbsp;

### Retrieve Drinks for a date

Retrieves all Drinks in the Day-object corresponding to the given date.

***Parameters***
- date (required)

```bash
GET http://localhost:3000/day/"20221224"/drinks

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day/20221224/drinks", 
                 {method: "GET",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"}
                  });

response = response.json()
```
**Response**

An array of all Drink-objects in JSON-format.
```javascript
[{
  "time": "18:00",
  "beverage": "Beer",
  "volume": "0.5",
  "unit": "l",
  "percentage": "4.5",
  "color": "#000555"
}]
```


&nbsp;

### Remove Drink

Removes a Drink-object from the Day-object that represents the gate given.

***Parameters***
- date (required)
- drink.id (required)

```bash
GET http://localhost:3000/day/"20221224"/remove

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day/20221224/remove", 
                 {method: "PATCH",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"},
                  body : {
                          "id": "xyz987"
                         }

                  });

response = response.json()
```
**Response**

The modified Day-object in JSON-format.
```javascript

 {
 "id": "abcd123"
 "date": "20221224"
 "drinks": []
 }
```
&nbsp;

## Prefab

A Prefab is a drink-template that is displayed to users for quicker selection of Drinks.


**Attributes:**
- id (String): Automatically generated by the Alcocalc-server
- beverage (String): Type of drink
- volume (String): Volume of the drink
- percentage (String): Alcoholic percentage of the drink
- color (String): Color assigned for the drink by the user

```javascript
{
  id: {type: String}
  beverage: {type: String},
  volume: {type: String},
  unit: {type: String},
  percentage: {type: String},
  color: {type: String},
    }]
```

&nbsp;


### Create Prefab

Creates a Prefab-object.

***Parameters***
- beverage (required)
- volume: (required)
- unit: (required)
- percentage: (required)
- color: (required)

```bash
POST http://localhost:3000/prefab

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/prefab", 
                 {method: "POST",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"},
                  body: { 
                         "beverage": "Beer",
                         "volume": "0.5",
                         "unit": "l",
                         "percentage": "4.5",
                         "color": "#000555"
                          }
                  });

response = response.json()
```
**Response**

The created Prefab-object in JSON-format.
```javascript
 {
  "id": "mno456",
  "time": "18:00",
  "beverage": "Beer",
  "volume": "0.5",
  "unit": "l",
  "percentage": "4.5",
  "color": "#000555"
 }
```
&nbsp;

### Retrieve all Prefabs

Retrieves all Prefabs existing on the server.

***Parameters***
- None

```bash
GET http://localhost:3000/prefab

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/prefab", 
                 {method: "GET",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"}
                  });

response = response.json()
```
**Response**

An array of all Prefabs-objects in JSON-format.
```javascript
[
 {
  "id": "mno456",
  "time": "18:00",
  "beverage": "Beer",
  "volume": "0.5",
  "unit": "l",
  "percentage": "4.5",
  "color": "#000555"
 }
]
```
&nbsp;

### Delete a Prefab

Deletes the Day with the date provided.

***Parameters***
- date (required)

```bash
DELETE http://localhost:3000/prefab/"mno453"

```
**NodeJS request**
```javascript

const response = await fetch({"http://localhost:3000/day/mno453", 
                 {method: "DELETE",
                  headers: {"Accept": "application/json", "Content-Type": "application/json"}
                  });

response = response.json()
```
**Response**

The deleted Prefab-object in JSON-format.
```javascript

 {
  "id": "mno456",
  "time": "18:00",
  "beverage": "Beer",
  "volume": "0.5",
  "unit": "l",
  "percentage": "4.5",
  "color": "#000555"
 }

```
